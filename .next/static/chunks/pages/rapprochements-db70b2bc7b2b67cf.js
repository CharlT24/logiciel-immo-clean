(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[759],{6907:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/rapprochements",function(){return s(2517)}])},4126:function(e,t,s){"use strict";s.d(t,{O:function(){return r}});var n=s(8967);let r=(0,n.eI)("https://fkavtsofmglifzalclyn.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZrYXZ0c29mbWdsaWZ6YWxjbHluIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDI5MDgzNDIsImV4cCI6MjA1ODQ4NDM0Mn0.vN8-2RzyVu_2X4lWT4Uqa6aI3OYuAcIFFuMeGS5Po1Y")},2517:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var n=s(5893),r=s(7294),i=s(4126),l=s(1664),a=s.n(l);function c(){let[e,t]=(0,r.useState)([]),[s,l]=(0,r.useState)([]);(0,r.useEffect)(()=>{let e=async()=>{let{data:e}=await i.O.from("clients").select("*"),{data:s}=await i.O.from("biens").select("*").eq("disponible",!0);t(e||[]),l(s||[])};e()},[]);let c=e=>{let t=[e.type_bien||"maison",e.ville_recherche,e.budget_max+"€"].filter(Boolean).join(" ");return"https://www.google.com/search?q=".concat(encodeURIComponent(t))},o=e=>s.filter(t=>{var s,n,r,i;return(null===(n=t.ville)||void 0===n?void 0:n.toLowerCase().includes(null===(s=e.ville_recherche)||void 0===s?void 0:s.toLowerCase()))&&(null===(i=t.type_bien)||void 0===i?void 0:i.toLowerCase().includes((null===(r=e.type_bien)||void 0===r?void 0:r.toLowerCase())||""))&&t.prix>=e.budget_min&&t.prix<=e.budget_max});return(0,n.jsxs)("div",{className:"space-y-10",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-orange-600",children:"\uD83D\uDD0D Rapprochements"}),(0,n.jsx)(a(),{href:"/recherche",children:(0,n.jsx)("button",{className:"bg-orange-100 text-orange-700 px-4 py-2 rounded hover:bg-orange-200 text-sm",children:"\uD83C\uDF10 Acc\xe8s au moteur Google"})})]}),(0,n.jsx)("div",{className:"grid md:grid-cols-2 xl:grid-cols-3 gap-6",children:e.map(e=>{let t=o(e),s=t.length>0;return(0,n.jsxs)("div",{className:"bg-white rounded-xl shadow p-5 border space-y-2",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("h2",{className:"text-lg font-bold text-gray-800",children:e.nom}),(0,n.jsx)("span",{className:"text-xl",children:s?"\uD83D\uDFE2":"\uD83D\uDD34"})]}),(0,n.jsxs)("p",{className:"text-sm text-gray-600",children:["\uD83D\uDCCD ",e.ville_recherche]}),(0,n.jsxs)("p",{className:"text-sm text-gray-600",children:["\uD83D\uDCB0 ",e.budget_min,"€ – ",e.budget_max,"€"]}),(0,n.jsxs)("p",{className:"text-sm text-gray-600",children:["\uD83C\uDFE0 ",e.type_bien]}),(0,n.jsx)("a",{href:c(e),target:"_blank",rel:"noopener noreferrer",className:"inline-block mt-2 text-sm text-orange-600 hover:underline",children:"\uD83C\uDF10 Rechercher sur Google"}),s&&(0,n.jsxs)("div",{className:"mt-4",children:[(0,n.jsx)("p",{className:"text-sm font-semibold text-gray-700 mb-1",children:"\uD83C\uDFE1 Biens correspondants :"}),(0,n.jsx)("ul",{className:"text-sm space-y-1",children:t.map(e=>{var t;return(0,n.jsx)("li",{children:(0,n.jsxs)(a(),{href:"/biens/".concat(e.id),className:"text-orange-700 hover:underline",children:["\uD83D\uDCCD ",e.titre," \xe0 ",e.ville," – ",null===(t=e.prix)||void 0===t?void 0:t.toLocaleString()," €"]})},e.id)})})]})]},e.id)})})]})}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=6907)}),_N_E=e.O()}]);