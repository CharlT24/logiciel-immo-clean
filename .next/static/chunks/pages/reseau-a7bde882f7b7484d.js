(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[261],{8121:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/reseau",function(){return t(8739)}])},4126:function(e,s,t){"use strict";t.d(s,{O:function(){return a}});var l=t(8967);let a=(0,l.eI)("https://fkavtsofmglifzalclyn.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZrYXZ0c29mbWdsaWZ6YWxjbHluIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDI5MDgzNDIsImV4cCI6MjA1ODQ4NDM0Mn0.vN8-2RzyVu_2X4lWT4Uqa6aI3OYuAcIFFuMeGS5Po1Y")},8739:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return n}});var l=t(5893),a=t(7294),i=t(4126);function n(){let[e,s]=(0,a.useState)([]),[t,n]=(0,a.useState)([]),[r,c]=(0,a.useState)(""),[d,o]=(0,a.useState)(null),[u,x]=(0,a.useState)([]),[m,h]=(0,a.useState)([]);(0,a.useEffect)(()=>{g()},[]);let g=async()=>{let{data:e,error:t}=await i.O.from("utilisateurs").select("*");t||(s(e),n(e))},b=async e=>{o(e);let{data:s}=await i.O.from("biens").select("*").eq("agent_id",e),{data:t}=await i.O.from("clients").select("*").eq("agent_id",e);x(s||[]),h(t||[])};return(0,l.jsxs)("div",{className:"space-y-10",children:[(0,l.jsx)("div",{className:"flex justify-between items-center",children:(0,l.jsx)("h1",{className:"text-2xl font-bold text-orange-700",children:"\uD83C\uDF10 Mon r\xe9seau"})}),(0,l.jsx)("div",{className:"flex gap-4 items-center",children:(0,l.jsx)("input",{type:"text",placeholder:"\uD83D\uDD0D Rechercher un agent par nom ou ville...",value:r,onChange:s=>{let t=s.target.value.toLowerCase();c(t);let l=e.filter(e=>{var s,l;return(null===(s=e.nom)||void 0===s?void 0:s.toLowerCase().includes(t))||(null===(l=e.ville)||void 0===l?void 0:l.toLowerCase().includes(t))});n(l)},className:"w-full p-2 border border-gray-300 rounded-md shadow-sm text-sm"})}),(0,l.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(e=>(0,l.jsxs)("div",{className:"rounded-xl shadow border p-4 bg-white hover:shadow-lg transition ".concat(d===e.id?"border-orange-500":"border-gray-100"),children:[(0,l.jsx)("h2",{className:"font-semibold text-lg text-gray-800",children:e.nom||"Agent"}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:e.email}),(0,l.jsxs)("p",{className:"text-sm text-gray-500 mb-2",children:["\uD83D\uDCCD ",e.ville||"Ville inconnue"]}),(0,l.jsx)("button",{className:"text-sm text-orange-600 hover:underline",onClick:()=>b(e.id),children:"➕ Voir ses biens & clients"})]},e.id))}),d&&(0,l.jsxs)("div",{className:"bg-white rounded-xl shadow p-6 border border-orange-100 space-y-6",children:[(0,l.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"\uD83D\uDCC1 D\xe9tails de l’agent"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-md font-semibold text-orange-600 mb-2",children:"\uD83C\uDFE1 Biens"}),0===u.length?(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"Aucun bien trouv\xe9"}):(0,l.jsx)("ul",{className:"text-sm space-y-1",children:u.map(e=>{var s;return(0,l.jsxs)("li",{children:["• ",e.titre," \xe0 ",e.ville," — ",null===(s=e.prix)||void 0===s?void 0:s.toLocaleString()," €"]},e.id)})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-md font-semibold text-orange-600 mb-2",children:"\uD83D\uDC64 Clients"}),0===m.length?(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"Aucun client enregistr\xe9"}):(0,l.jsx)("ul",{className:"text-sm space-y-1",children:m.map(e=>(0,l.jsxs)("li",{children:["• ",e.nom," — ",e.ville," (",e.budget_min,"€ \xe0 ",e.budget_max,"€)"]},e.id))})]})]})]})]})}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=8121)}),_N_E=e.O()}]);