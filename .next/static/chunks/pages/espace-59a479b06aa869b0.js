(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[589],{3438:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/espace",function(){return t(1030)}])},9490:function(e,s,t){"use strict";t.d(s,{Z:function(){return c}});var n=t(5893),i=t(1664),l=t.n(i);function c(){return(0,n.jsxs)("nav",{className:"bg-white shadow mb-6 px-4 py-3 flex justify-center space-x-4",children:[(0,n.jsx)(l(),{href:"/espace",className:"text-blue-600 hover:underline",children:"\uD83C\uDFE1 Espace"}),(0,n.jsx)(l(),{href:"/clients",className:"text-blue-600 hover:underline",children:"\uD83D\uDC65 Ajouter client"}),(0,n.jsx)(l(),{href:"/biens",className:"text-blue-600 hover:underline",children:"\uD83C\uDFE0 Ajouter bien"}),(0,n.jsx)(l(),{href:"/admin/utilisateurs",className:"text-blue-600 hover:underline",children:"\uD83D\uDEE0 Utilisateurs"})]})}},4126:function(e,s,t){"use strict";t.d(s,{O:function(){return i}});var n=t(8967);let i=(0,n.eI)("https://fkavtsofmglifzalclyn.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZrYXZ0c29mbWdsaWZ6YWxjbHluIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDI5MDgzNDIsImV4cCI6MjA1ODQ4NDM0Mn0.vN8-2RzyVu_2X4lWT4Uqa6aI3OYuAcIFFuMeGS5Po1Y")},1030:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return a}});var n=t(5893),i=t(7294),l=t(4126),c=t(9490);function a(){let[e,s]=(0,i.useState)([]),[t,a]=(0,i.useState)([]),[r,u]=(0,i.useState)(!0),[d,x]=(0,i.useState)(!1),[o,m]=(0,i.useState)(null);return(0,i.useEffect)(()=>{let e=async()=>{let{data:{session:e},error:t}=await l.O.auth.getSession();if(t||!e){console.warn("⚠️ Pas de session active");return}let n=e.user.id;m(n),console.log("\uD83D\uDCCC Agent connect\xe9 :",n);let i=l.O.from("biens").select("*"),c=l.O.from("clients").select("*");r||(i=i.eq("agent_id",n)),d||(c=c.eq("agent_id",n));let{data:u,error:x}=await i,{data:o,error:h}=await c;x&&console.error("❌ Erreur biens :",x),h&&console.error("❌ Erreur clients :",h),console.log("\uD83D\uDCE6 Biens r\xe9cup\xe9r\xe9s :",u),s(u||[]),a(o||[])};e()},[r,d]),(0,n.jsxs)("div",{className:"p-6 bg-gray-100 min-h-screen text-gray-800",children:[(0,n.jsx)(c.Z,{}),(0,n.jsx)("h1",{className:"text-3xl font-semibold mb-6 text-center",children:"\uD83C\uDFE1 Espace Agent (Debug)"}),(0,n.jsxs)("div",{className:"mb-10",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,n.jsx)("h2",{className:"text-xl font-bold",children:"\uD83D\uDCE6 Biens"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("button",{onClick:()=>u(!1),className:"px-3 py-1 rounded ".concat(r?"bg-gray-200":"bg-blue-600 text-white"),children:"Mes biens"}),(0,n.jsx)("button",{onClick:()=>u(!0),className:"ml-2 px-3 py-1 rounded ".concat(r?"bg-blue-600 text-white":"bg-gray-200"),children:"Tous les biens"})]})]}),0===e.length?(0,n.jsx)("p",{className:"text-gray-500",children:"Aucun bien \xe0 afficher."}):(0,n.jsx)("ul",{className:"space-y-3",children:e.map(e=>(0,n.jsxs)("li",{className:"bg-white p-4 rounded shadow border",children:[(0,n.jsx)("div",{className:"font-bold text-lg",children:e.titre}),(0,n.jsxs)("div",{className:"text-sm",children:["\uD83C\uDFE0 Ville : ",e.ville]}),(0,n.jsxs)("div",{className:"text-sm",children:["\uD83D\uDCCF Surface : ",e.surface_m2," m\xb2"]}),(0,n.jsxs)("div",{className:"text-sm",children:["\uD83D\uDCB6 Prix : ",e.prix," €"]}),(0,n.jsxs)("div",{className:"text-sm",children:["\uD83D\uDD0B DPE : ",e.dpe]}),(0,n.jsxs)("div",{className:"text-sm",children:["\uD83D\uDD11 Agent ID : ",e.agent_id]}),(0,n.jsxs)("div",{className:"text-sm",children:["✅ Disponible : ",String(e.disponible)]}),(0,n.jsxs)("div",{className:"text-xs text-gray-400",children:["\uD83D\uDCC5 Cr\xe9\xe9 le : ",e.created_at]})]},e.id))})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,n.jsx)("h2",{className:"text-xl font-bold",children:"\uD83D\uDC65 Clients"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("button",{onClick:()=>x(!1),className:"px-3 py-1 rounded ".concat(d?"bg-gray-200":"bg-blue-600 text-white"),children:"Mes clients"}),(0,n.jsx)("button",{onClick:()=>x(!0),className:"ml-2 px-3 py-1 rounded ".concat(d?"bg-blue-600 text-white":"bg-gray-200"),children:"Tous les clients"})]})]}),(0,n.jsx)("ul",{className:"space-y-3",children:t.map(e=>(0,n.jsxs)("li",{className:"bg-white p-4 rounded shadow border",children:[(0,n.jsx)("div",{className:"font-semibold",children:e.nom}),(0,n.jsxs)("div",{className:"text-sm",children:["\uD83D\uDCCD Ville : ",e.ville_recherche]}),(0,n.jsxs)("div",{className:"text-sm",children:["\uD83D\uDCB6 Budget : ",e.budget_min," € - ",e.budget_max," €"]}),(0,n.jsxs)("div",{className:"text-sm",children:["\uD83D\uDD11 Agent ID : ",e.agent_id]})]},e.id))})]})]})}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=3438)}),_N_E=e.O()}]);